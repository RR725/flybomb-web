webpackJsonp([9],{902:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var n=a(600),r=l(n),s=a(783),i=r.default.createClass({displayName:"Info",getContainer:function(){return document.getElementById("detailTable")},render:function(){var t=this,e=[{text:"目标数",title:"计划推送的目标数"},{text:"日增用户数",title:"当天首次订阅应用的设备数"},{text:"在线峰值用户数",title:"订阅该应用的设备中，当天同时在线的数量峰值"},{text:"日联网用户数",title:"订阅该应用的设备中，当天有联网行为的设备数总和"},{text:"累计注册用户数",title:"历史累积订阅该应用的设备数，已卸载应用不计入累计用户数中"},{text:"联网数",title:"联网并且与通道形成长链接的设备数"},{text:"到达应用数",title:"PushSDK将消息发送给应用的数量（flyme6中，通知栏消息由pushSDK弹出，此埋点仍保留有上报数据）"},{text:"划掉数",title:"在通知栏中划掉消息的数量。透传消息不统计该项"},{text:"已卸载数",title:"本次推送任务中应用已被卸载的数量，数据上将出现接收数大于展示数。（flyme6固件此应用会被反订阅，在重新订阅前下次推送任务将不朝它推送；flyme6以下固件应用没有被反订阅）"},{text:"有效数",title:"从目标数中去除错误或无效的ID，实际有效的ID数量。筛选包括开关状态，订阅状态，pushid有效性以及其他可以推送状态"},{text:"推送数",title:"Push平台实际下发推送的数量"},{text:"接收数",title:"Push服务接收数，任务有效期内，联网并正常接收到推送消息的数量"},{text:"展示数",title:"客户端从Push服务收到消息，并在通知栏中展示的数量（3.0以下版本SDK，数据统计T+1，3.0以上实时统计。透传消息没有展示数统计）"},{text:"点击数",title:"用户点击消息的数量（3.0以下版本SDK，数据统计T+1，3.0以上实时统计。透传消息没有点击数统计）"},{text:"App ID",title:"应用的唯一标识，客户端订阅推送时使用"},{text:"App Key",title:"客户端身份标识，客户端订阅推送时使用"},{text:"App Secret",title:"服务端身份标识，服务端 SDK 初始化使用"},{text:"点击动作",title:"调起包名不是必填项，如不填，则参数传给本应用"},{text:"推送黑名单",title:"选择黑名单后，本次推送将不会朝这批用户推送"},{text:"定速推送",title:"开启定速推送后，此任务的推送速率将按设置的速率推送。速率不会超过应用最大推送速率"},{text:"定时展示",title:"开启定时展示后，目标用户的展示量将平摊到时间段内"},{text:"任务定制",title:"设置好循环推送的周期后，会在规定的时间点进行推送"}],a=e.map(function(e){var a=t.props.text;return a.indexOf(e.text)>-1?e.title:""});return r.default.createElement("span",null,r.default.createElement(s.Tooltip,{getTooltipContainer:this.getContainer,title:a},r.default.createElement("i",{className:"fs14 color999 fw_n cursor_p anticon anticon-info-circle-o"})),this.props.text)}});t.exports=i},926:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var n=a(600),r=l(n),s=a(783),i=r.default.createClass({displayName:"App",getNumber:function(t){var e=t.toString().split(","),a=parseInt(e.join(""));return a},getGroupPushChart:function(){var t=this,e=this.props.options,a=e.pushTasks,l=e.data.length,n=e.data,i=[];n.sort(function(t,e){var a=t.replace("%","");a=Number(a);var l=e.replace("%","");return l=Number(l),l-a}),a.sort(function(t,e){var a=t.taskStatics.clickRate,l=e.taskStatics.clickRate;return a=a.replace("%",""),a=Number(a),l=l.replace("%",""),l=Number(l),l-a}),n.map(function(t){var e=t.replace("%","");i.push(Number(e))}),i.sort(function(t,e){return e-t});var u=i[0],c=n.map(function(n,i){var c=n.replace("%",""),o=u?u:100,d=c*e.height/o,p=d/300,m={background:e.bgcolor,opacity:p<.2?.2:p,height:d},f={marginLeft:10/l*32,marginTop:e.height-d};l>10&&(f.width=10/l*60);var h=r.default.createElement("div",{className:"chart_tips",style:{padding:10}},r.default.createElement("h3",null,"任务ID：",a[i].taskId),r.default.createElement("h3",null,"标题/备注：",a[i].title),r.default.createElement("h3",null,"内容：",a[i].content),a[i].pushTypeInfo?r.default.createElement("h3",null,"目标用户：",t.props.getUserInfo(a[i])):null,r.default.createElement("h3",null,"推送状态：",a[i].status),r.default.createElement("h3",null,"推送用户数：",a[i].taskStatics.pushedNo));return r.default.createElement(s.Tooltip,{placement:"right",key:i,title:h},r.default.createElement("div",{style:f,key:i,className:"bar_li bar_li_group"},r.default.createElement("div",{className:"bar",style:m}),r.default.createElement("div",{style:{top:-26},className:"text_num"},r.default.createElement("p",{className:"num"},n))))});return r.default.createElement("div",{className:"data_bar"},r.default.createElement("style",null,"\n\t\t\t\t\t\t\t.ant-tooltip-placement-right .ant-tooltip-inner{\n\t\t\t\t\t\t\t\tbackground-color:#fff;\n\t\t\t\t\t\t\t\tword-break:break-all;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"),r.default.createElement("div",{className:"bar_con",style:{position:"relative",height:e.height,marginTop:70,borderLeft:"1px solid #ccc"}},c,r.default.createElement("span",{style:{position:"absolute",left:0,bottom:-30}},"点击率")))},render:function(){if("groupPush"===this.props.type)return this.getGroupPushChart();var t=this,e=this.props.chartData,a=this.getNumber(e.targetNo),l=this.props.options,n=l.data.length,i=l.data.map(function(e,i){var u=t.getNumber(e)/a*l.height,c={background:l.bgcolor,opacity:i/n+.2,height:u,marginTop:l.height-u},o=r.default.createElement("div",{className:"chart_tips"},r.default.createElement("h2",null,l.x[i]),r.default.createElement("p",null,l.data[i]),l.x[i-1]?r.default.createElement("span",null,r.default.createElement("h2",null,"转化率",r.default.createElement("span",{className:"info"},l.x[i],"/",l.x[i-1])),r.default.createElement("p",null,l.rate[i])):null);return r.default.createElement(s.Tooltip,{placement:"right",key:i,title:o},r.default.createElement("div",{className:"bar_li"},r.default.createElement("div",{className:"bar",style:c}),r.default.createElement("div",{style:{top:l.height-u-46},className:"text_num"},r.default.createElement("p",{className:"text"},l.x[i]),r.default.createElement("p",{className:"num"},e))))});return a?r.default.createElement("div",{className:"data_bar"},r.default.createElement("style",null,"\n\t\t\t\t\t\t\t.ant-tooltip-inner{\n\t\t\t\t\t\t\t\tbackground-color:#fff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"),r.default.createElement("div",{className:"bar_con",style:{height:l.height}},i)):null}});t.exports=i},1325:function(t,e,a){"use strict";function l(t){return t&&t.__esModule?t:{default:t}}var n=a(600),r=l(n),s=a(783),i=a(776),u=l(i),c=a(777),o=l(c),d=a(785),p=l(d),m=a(908),f=l(m),h=a(926),y=l(h),g=a(902),N=l(g),I={labelCol:{span:3},wrapperCol:{span:21}},T=r.default.createClass({displayName:"App",getInitialState:function(){return{refresh:!0,groupId:"",data:null}},componentWillUnmount:function(){document.querySelector("#pushRecord")&&(document.querySelector("#pushRecord").className=""),document.querySelector("#dataStat")&&(document.querySelector("#dataStat").className="")},componentDidMount:function(){document.querySelector("#dataStat")&&(document.querySelector("#dataStat").className="active"),document.querySelector("#pushRecord")&&(document.querySelector("#pushRecord").className="active");var t=o.default.queryString("groupId",window.location.href),e=o.default.queryString("appId",window.location.href),a={groupId:t,appId:e};this.tableData(a)},tableData:function(t){var e=this,a=u.default.getTaskGroup;a=o.default.makeUrl(a,t),p.default.get(a,function(t){e.setState({data:t.value,loading:!1,pagination:!1})})},getUserInfo:function(t){var e=t.userTypeInfo,a=e.userFileName||(e.tagNames?e.scopeDesc+":"+e.tagNames:null);return a=a?"("+a+")":"",a=e.userTypeDesc+a},render:function(){var t=this,e=o.default.queryString("groupId",window.location.href),a=this.state.data;if(!a)return null;var l=this.state.data.pushTimeInfo&&this.state.data.pushTimeInfo.offLine,n=this.state.data.groupName,i=0===this.state.data.pushType?this.state.data.noticeBarInfo&&this.state.data.noticeBarInfo.content:this.state.data.content,u=a.appLogVos,c="　",d="　";u&&u.length&&(c=u[0].time,d=u[0].account);var p=a.userTypeInfo&&a.userTypeInfo.userTypeDesc||"　",m={pushTypeDesc:a.pushTypeDesc,formItemLayout:I,appName:a.appName||"　",groupType:a.groupType,title:n,appLogVos:a.appLogVos,detailType:"data",content:i,startTime:a.pushTimeInfo&&a.pushTimeInfo.startTime||"　",offLine:l,validTime:a.pushTimeInfo&&a.pushTimeInfo.validTime,userTypeText:p,pushType:a.pushType,userName:d,creatTime:c,scopeDesc:a.userTypeInfo&&a.userTypeInfo.scopeDesc,tagIdsName:a.userTypeInfo&&a.userTypeInfo.tagNames,userGroupDesc:a.userTypeInfo&&a.userTypeInfo.userGroupDesc,userFileName:a.userTypeInfo&&a.userTypeInfo.userFileName},h=[{title:"分组任务ID",key:"0",className:"ta_c",dataIndex:"taskId"},{title:"标题/备注",key:"1",className:"ta_c",render:function(t){return t.length>9?r.default.createElement(s.Tooltip,{title:t},r.default.createElement("span",{className:"ellipsis display_ib",style:{width:100}},t)):t},dataIndex:"title"},{title:"内容",key:"2",className:"ta_c",render:function(t){return t.length>9?r.default.createElement(s.Tooltip,{title:t},r.default.createElement("span",{className:"ellipsis display_ib",style:{width:100}},t)):t},dataIndex:"content"},{},{title:"推送状态",key:"4",className:"ta_c",dataIndex:"status"},{title:"推送用户数",key:"5",className:"ta_c",render:function(t,e){return e.taskStatics.pushedNo},dataIndex:"title"},{title:r.default.createElement(N.default,{text:"展示数"}),key:"6",className:"ta_c",render:function(t,e){return e.taskStatics.displayNo},dataIndex:"title"},{title:r.default.createElement(N.default,{text:"点击数"}),key:"7",className:"ta_c",render:function(t,e){return e.taskStatics.clickNo},dataIndex:"title"},{title:"点击率",key:"8",className:"ta_c",render:function(t,e){return e.taskStatics.clickRate},dataIndex:"title"},{title:"操作",key:"9",className:"ta_c",render:function(t,e){var a=o.default.queryString("appId",window.location.href),l="#/data/push/detail?appId="+a+"&taskId="+e.taskId;"0"===a&&(a=window.ListApp[0].appId);var n="#/create/push?copyTaskId="+e.taskId+"&appId="+e.appId+"&pushType="+("通知"===e.pushType?"notice":"message")+"&taskId="+e.taskId;return r.default.createElement("div",{className:"btn_wrap"},r.default.createElement(s.Tooltip,{title:"推送详情"},r.default.createElement("a",{target:"_blank",href:window.location.pathname+l},r.default.createElement("i",{className:"i_detail"}))),r.default.createElement(s.Tooltip,{title:"选择推送"},r.default.createElement("a",{href:window.location.pathname+n},r.default.createElement("i",{className:"i_copy"}))))},dataIndex:"title"}];"不同用户群"===a.groupType&&(h[3]={title:"目标用户",key:"3",className:"ta_c",render:function(e,a){var l=t.getUserInfo(a);return l.length>9?r.default.createElement(s.Tooltip,{title:l},r.default.createElement("span",{className:"ellipsis display_ib",style:{width:100}},l)):l},dataIndex:"title"});var g=a.pushTasks,T=[],E=[];if(g)for(var x=0;x<g.length;x++)T.push(g[x].taskStatics.clickRate),E.push("分组"+(x+1));var v={data:T,x:E,pushTasks:g,rate:T,bgcolor:"#18A9FF",height:300};return r.default.createElement("div",null,r.default.createElement(s.Row,{className:"content_toolbar"},r.default.createElement(s.Col,{span:"24"},r.default.createElement("div",{className:"title"},r.default.createElement("span",{className:"border"}),"分组ID：",e,r.default.createElement("span",{className:"data_tit"},n)))),r.default.createElement(f.default,{type:"groupPush",pushDetailData:m}),r.default.createElement("div",{id:"detailTable",className:"chart_table",style:{marginTop:10,paddingBottom:50}},r.default.createElement(s.Table,{refresh:this.state.refresh,columns:h,loading:this.state.loading,dataSource:a.pushTasks,pagination:this.state.pagination}),g&&"通知"===a.pushType?r.default.createElement(y.default,{type:"groupPush",getUserInfo:this.getUserInfo,options:v,chartData:this.props.chartData,pushType:this.props.pushType}):null))}});T=s.Form.create()(T),t.exports=T}});