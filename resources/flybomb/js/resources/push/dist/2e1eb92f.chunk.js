webpackJsonp([19],{1364:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(600),r=l(n),i=a(1365),o=l(i),s=a(1366),d=l(s),u=a(776),c=l(u),p=a(777),m=l(p),f=a(785),g=l(f),h=r.default.createClass({displayName:"App",getInitialState:function(){return{current:1,tableData:{loading:!0,data:[],pagination:null}}},tableData:function(e){var t=this;this.setState({tableData:{loading:!0}}),e.index&&this.setState({current:e.index});var a=c.default.listOpenTag;a=m.default.makeUrl(a,e),g.default.get(a,function(e){var a=e.value.result;a.map(function(e,t){a[t].key=t}),t.setState({tableData:{data:a,loading:!1,pagination:{total:e.value.amount,current:t.state.current,pageSize:10,showSizeChanger:!1,onChange:function(e){var a={appId:0,index:e};t.setState({current:e}),t.tableData(a)}}}})})},componentWillUnmount:function(){document.querySelector("#platformManage")&&(document.querySelector("#platformManage").className="")},componentDidMount:function(){document.querySelector("#platformManage")&&(document.querySelector("#platformManage").className="active");var e={index:1};this.tableData(e)},render:function(){return r.default.createElement("div",null,r.default.createElement(o.default,{current:this.state.current,onSearch:this.tableData}),r.default.createElement(d.default,{current:this.state.current,onSearch:this.tableData,refresh:this.state.refresh,tableData:this.state.tableData}))}});e.exports=h},1365:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=a(600),o=l(i),s=a(783),d=a(776),u=l(d),c=a(785),p=l(c),m=a(777),f=l(m),g=s.Radio.Group,h=s.Form.Item,y=s.Select.Option,v={labelCol:{span:6},wrapperCol:{span:18}},b=o.default.createClass({displayName:"AddAppTask",getInitialState:function(){return{subDisplay:"none",disabled:!0,initData:{},values:[],data:null,noticeBarType:"0",noticeExpandType:"0",pushTimeType:"0",appName:"全部应用",appId:0,errors:{},defaultAppid:"应用",randomUser:1}},addOpenTag:function(){var e=this;this.props.form.validateFields(function(t,a){return t?void console.log("Errors in form!!!"):(a.categoryCode=e.state.categoryCode,a.categoryName=e.state.categoryName,a.tagCode=e.state.tagCode,a.tagName=e.state.tagName,void p.default.post(u.default.addOpenTag,a,function(){s.message.success("添加成功"),e.props.onSearch({index:e.props.current})}))})},componentWillMount:function(){var e=this,t=f.default.queryString("id",window.location.href);t&&e.props.form.setFieldsValue({appId:t})},getCategaryData:function(e){var t=this,a=u.default[e];"listTagByCategory"===e&&(a=f.default.makeUrl(a,{cid:this.props.form.getFieldValue("cid")})),p.default.get(a,function(a){var l=a.value,r=l.map(function(t,a){var l="listTagByCategory"===e?String(t.tid):String(t.cid);return o.default.createElement(y,{key:a,data:t,value:l},t.name,o.default.createElement("span",{className:"data_appid"},l))});t.setState(n({},e,r))})},selectMainList:function(e,t){this.props.form.setFieldsValue({cid:e,categoryCode:t.props.data.code,categoryName:t.props.data.name}),this.setState({subDisplay:"",disabled:!0,tagData:void 0,categoryCode:t.props.data.code,categoryName:t.props.data.name}),this.getCategaryData("listTagByCategory")},selectSubList:function(e,t){this.props.form.setFieldsValue({tid:e,tagCode:t.props.data.code,tagName:t.props.data.name}),this.setState({tid:e,disabled:!1,tagData:t.props.children,tagCode:t.props.data.code,tagName:t.props.data.name})},componentDidMount:function(){this.getCategaryData("listCategary")},render:function(){var e=this.props.form.getFieldProps;return o.default.createElement(s.Form,{horizontal:!0,className:"pugc_title"},o.default.createElement(s.Row,null,o.default.createElement(s.Col,{span:"12"},o.default.createElement(h,r({},v,{label:"一级标签    "}),o.default.createElement(s.Select,r({},e("cid"),{optionFilterProp:"children",onSelect:this.selectMainList,style:{width:190},showSearch:!0,notFoundContent:"无数据",placeholder:"请选择标签"}),this.state.listCategary)))),o.default.createElement(s.Row,null,o.default.createElement(s.Col,{span:"12"},o.default.createElement(h,r({style:{display:this.state.subDisplay}},v,{label:"二级标签    "}),o.default.createElement(s.Select,r({},e("tid"),{optionFilterProp:"children",value:this.state.tagData,onSelect:this.selectSubList,style:{width:290},showSearch:!0,notFoundContent:"无数据",placeholder:"请选择标签"}),this.state.listTagByCategory)))),o.default.createElement(s.Row,null,o.default.createElement(s.Col,{span:"12"},o.default.createElement(h,r({},v,{label:"终端展示样式    "}),o.default.createElement(g,e("displayType",{initialValue:0}),o.default.createElement(s.Radio,{name:"noticeBarType",value:0},"排列展示"),o.default.createElement(s.Radio,{name:"noticeBarType",value:1},"下拉框展示"))))),o.default.createElement(s.Row,null,o.default.createElement(s.Col,{span:"12"},o.default.createElement(h,r({},v,{label:" "}),o.default.createElement(s.Button,{onClick:this.addOpenTag,type:"primary",disabled:this.state.disabled,size:"large"},"添加选中")))))}});b=s.Form.create()(b),e.exports=b},1366:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=a(600),i=l(r),o=a(783),s=a(776),d=l(s),u=a(777),c=l(u),p=a(785),m=l(p),f=o.Radio.Group,g=i.default.createClass({displayName:"App",getInitialState:function(){var e=this;return{columns:[{title:"一级标签",key:"0",dataIndex:"categoryName",className:"td_appname "},{title:"二级标签",key:"1",className:"td_appname",dataIndex:"tagName"},{title:"展示类型",key:"2",className:"ta_c",dataIndex:"displayType",render:function(t,a){var l=a.id;return i.default.createElement("div",null,i.default.createElement(f,{onChange:e.changeRadio,"data-id":l,value:void 0===e.state["value"+l]?t:e.state["value"+l]},i.default.createElement(o.Radio,{"data-id":l,name:"list",value:0},i.default.createElement(o.Popover,{placement:"bottom",visible:e.state["changeType-0-"+l],content:e.getContent("changeType-0-"+l),title:"确定更改展示类型属性?",onVisibleChange:e.toggle.bind(e,"changeType-0-"+l),trigger:"click"},i.default.createElement("span",null,"排列展示"))),i.default.createElement(o.Radio,{"data-id":l,name:"dropdown",value:1},i.default.createElement(o.Popover,{placement:"bottom",visible:e.state["changeType-1-"+l],content:e.getContent("changeType-1-"+l),title:"确定更改展示类型属性?",onVisibleChange:e.toggle.bind(e,"changeType-1-"+l),trigger:"click"},i.default.createElement("span",null,"下拉框展示")))))}},{title:"操作",className:"ta_c",key:"3",render:function(t,a){var l=a.id;return i.default.createElement("div",{className:"btn_wrap"},i.default.createElement(o.Popover,{placement:"bottom",visible:e.state["delTag-"+l],content:e.getContent("delTag-"+l),title:"删除后不能恢复，继续删除?",onVisibleChange:e.toggle.bind(e,"delTag-"+l),trigger:"click"},i.default.createElement("a",{title:"删除",className:"ml10",to:"javascript:;"},"删除")))},dataIndex:""}],refresh:!1}},changeRadio:function(e){var t=e.target.value,a=e.target["data-id"],l="changeType-"+t+"-"+a;this.toggle(l)},showModal:function(e,t){var a={detailVisible:!1};"show"===t&&(a.detailVisible=!0,a.modal=e.value,a.currentTag=e.tagName),this.setState(a)},modalContent:function(){var e=this.state.modal;if(!e)return null;e=JSON.parse(e);var t=e.map(function(e,t){return i.default.createElement("li",{key:t},e.name)});return i.default.createElement("div",{className:"usergroup_taglist"},i.default.createElement("h3",null,this.state.currentTag),i.default.createElement("ul",null,t))},delTag:function(e){var t=this,a=e[1],l=this.props.tableData.pagination.total,n=this.props.current,r=d.default.delOpenTag;r=c.default.makeUrl(r,{id:a}),m.default.get(r,function(){o.message.success("删除成功"),l%10===1&&1!==l&&(n-=1),t.props.onSearch({index:n})})},changeType:function(e){var t=e[2],a=e[0]+"-"+e[1]+"-"+t,l=d.default.updateDisplayType;l=c.default.makeUrl(l,{id:t,displayType:e[1]}),m.default.get(l,function(){o.message.success("修改成功")}),this.setState(n({},"value"+t,"1"===e[1]?1:0)),this.toggle(a)},getContent:function(e){var t=e.split("-"),a=t[0];return i.default.createElement("div",null,i.default.createElement(o.Button,{type:"primary",className:"color_bg mr10",onClick:this.toggle.bind(this,e)},"取消"),i.default.createElement(o.Button,{onClick:this[a].bind(this,t)},"确定"))},toggle:function(e){this.setState(n({},e,!this.state[e]))},render:function(){return i.default.createElement("div",null,i.default.createElement(o.Table,{columns:this.state.columns,loading:this.props.tableData.loading,dataSource:this.props.tableData.data,pagination:this.props.tableData.pagination}),i.default.createElement(o.Modal,{width:500,footer:[i.default.createElement(o.Button,{key:"submit",type:"primary",size:"large",onClick:this.showModal},"确 定")],onCancel:this.showModal,onOk:this.showModal,title:"标签详情",visible:this.state.detailVisible},this.modalContent()))}});e.exports=g}});