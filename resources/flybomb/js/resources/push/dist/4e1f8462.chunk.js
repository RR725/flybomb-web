webpackJsonp([22],{1375:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a(600),d=l(n),i=a(783),u=a(776),c=l(u),r=a(777),m=l(r),o=a(785),h=l(o),p=i.DatePicker.RangePicker,f=i.Radio.Group,I=i.Select.Option,g=d.default.createClass({displayName:"ConfigDebug",getInitialState:function(){return{chosedType:1,chosedDropMenu:1}},componentWillUnmount:function(){document.querySelector("#configManage")&&(document.querySelector("#configManage").className="")},getAppInfo:function(){var e=this,t=m.default.queryString("appId",window.location.href);this.setState({appId:t}),h.default.get(c.default.getAppInfo+"?appId="+t,function(t){e.setState({dwAuth:t.value.dwAuth})})},componentWillReceiveProps:function(){var e=m.default.queryString("appId",window.location.href);this.state.appId&&e!==this.state.appId&&this.getAppInfo()},componentDidMount:function(){document.querySelector("#configManage")&&(document.querySelector("#configManage").className="active"),this.getAppInfo()},handleMenuClick:function(e){var t=void 0;switch(e){case"1":t="deviceId2PushId";break;case"2":t="alias2PushId";break;case"3":t="pushId2Alias";break;case"4":t="pushId2Tags"}this.setState(s({chosedDropMenu:e},t+"Display",!1)),this.refs.sinput.refs.input.value=""},onChangeDate:function(e,t){this.refs.rp.setAttribute("data-date",t.join(","))},onChangeType:function(e){this.setState({chosedType:e.target.value,getDetailByMsgIdDisplay:!1,getDetailByPushIdDisplay:!1})},handleSubmit:function(e){var t=this,a=this,l=m.default.queryString("appId",window.location.href),n=document.querySelector("#"+e).value;n=n.trim();var i=c.default[e],u={appId:l};if("deviceId2PushId"===e)u.deviceId=n;else if("alias2PushId"===e)u.alias=n;else if("getDetailByMsgId"===e){var r=document.querySelector("#getDetailByMsgId_pushId").value;r=r.trim(),u.pushId=r,u.msgId=n}else if("getDetailByPushId"===e){u.pushId=n;var o=this.refs.rp.getAttribute("data-date");if(!o){var p=m.default.dateFormat("yyyy-MM-dd",new Date);o=p+","+p}o=o.split(","),u.startTime=o[0],u.endTime=o[1]}else u.pushId=n;var f=!1;if("getDetailByMsgId"===e){var I=u.pushId;""===I&&(f=!0)}if(""===n||f){var g;return void this.setState((g={},s(g,e+"Text","输入框不能为空"),s(g,e+"Display",!0),g))}i=m.default.makeUrl(i,u),this.setState(s({},e+"Display",!1)),h.default.get(i,function(l){var n,i=l.value;if("deviceOnlineStatus"===e&&(i=i?"在线":"离线"),"deviceSubStatus"===e&&(i=d.default.createElement("span",null,i?d.default.createElement("p",null,"AppId: ",i.pushAppId):null,i?d.default.createElement("p",null,"包名: ",i.packageName):null,d.default.createElement("p",null,"是否订阅: ",i?"已订阅":"未订阅"),i?d.default.createElement("p",null,"通知栏开关: ",i.barSwitch?"开":"关"):null,i?d.default.createElement("p",null,"透传开关: ",i.directSwitch?"开":"关"):null)),"systemPushReview"===e&&(i=i?d.default.createElement("span",null,"已推送",d.default.createElement("p",null,"msgId：",i)," "):"推送失败"),"pushId2Tags"===e){for(var u=[],c=0;c<i.tags.length;c++)u.push(d.default.createElement("p",{key:i.tags[c].tagId},i.tags[c].tagName));i.tags.length||(u="无对应的标签"),i=d.default.createElement("div",null,u)}else if("pushId2Alias"===e)i=i?"别名："+(i.alias?i.alias:"无对应的别名"):"";else if("alias2PushId"===e){for(var r=[],m=0;m<i.length;m++)r.push(d.default.createElement("p",{key:m},i[m]));i.length||(r="该别名无对应的PushId"),i=d.default.createElement("div",null,r)}else if("getDetailByMsgId"===e){for(var o=[],h=0;h<i.details.length;h++){var p=i.details[h];o.push(d.default.createElement("p",null,p.time,"  ",p.common))}i=d.default.createElement("div",null,d.default.createElement("div",{className:"title"},"MsgId ：",i.msgId?i.msgId+(i.pushType?"（"+i.pushType+"）":""):"无数据"),d.default.createElement("div",null,o))}else"getDetailByPushId"===e&&(i=i.length>0?i.map(function(e,t){for(var l=e,s=[],n="info"+t+" hide",i=0;i<l.details.length;i++){var u=l.details[i];s.push(d.default.createElement("p",{key:t+""+i},u.time,"  ",u.common))}return d.default.createElement("div",{key:t},d.default.createElement("a",{className:"title",href:"javascript:void(0);",onClick:a.MsgIdcontrol.bind(a,t)},"MsgId ：",l.msgId," ",l.pushType?"（"+l.pushType+"）":""),d.default.createElement("div",{className:n},s))}):"无数据",i=d.default.createElement("div",null,i));t.setState((n={},s(n,e+"Text",i),s(n,e+"Display",!0),n))})},disabledDate:function(e){return e.time>(new Date).getTime()},MsgIdcontrol:function(e){var t=document.querySelectorAll(".info"+e)[0];t.classList.toggle("hide")},render:function(){var e=void 0,t=void 0,a=void 0,l=document.getElementById("userAuth")&&document.getElementById("userAuth").innerHTML;switch(this.state.chosedDropMenu+""){case"1":e=d.default.createElement(i.Input,{ref:"sinput",id:"deviceId2PushId",placeholder:"请输入IMEI"}),t=d.default.createElement("p",{style:{display:this.state.deviceId2PushIdDisplay?"":"none"}},this.state.deviceId2PushIdText),a="deviceId2PushId";break;case"2":e=d.default.createElement(i.Input,{ref:"sinput",id:"alias2PushId",placeholder:"请输入别名"}),t=d.default.createElement("div",{style:{display:this.state.alias2PushIdDisplay?"":"none"}},this.state.alias2PushIdText),a="alias2PushId";break;case"3":e=d.default.createElement(i.Input,{ref:"sinput",id:"pushId2Alias",placeholder:"请输入PushId"}),t=d.default.createElement("div",{className:"break_word",style:{display:this.state.pushId2AliasDisplay?"":"none"}},this.state.pushId2AliasText),a="pushId2Alias";break;case"4":e=d.default.createElement(i.Input,{ref:"sinput",id:"pushId2Tags",placeholder:"请输入PushId"}),t=d.default.createElement("div",{style:{display:this.state.pushId2TagsDisplay?"":"none"}},this.state.pushId2TagsText),a="pushId2Tags"}var s=d.default.createElement(i.Row,{className:"list list_drop"},d.default.createElement(i.Col,{span:"10"},d.default.createElement(i.Col,{span:"12"},d.default.createElement(i.Select,{defaultValue:"IMEI查询PushId",size:"large",onChange:this.handleMenuClick},d.default.createElement(I,{value:"1"},"IMEI查询PushId"),d.default.createElement(I,{value:"2"},"别名查询PushId"),d.default.createElement(I,{value:"3"},"PushId/IMEI 查询别名"),d.default.createElement(I,{value:"4"},"PushId/IMEI 查询标签"))),d.default.createElement(i.Col,{span:"12"},e),d.default.createElement(i.Col,{span:"24",className:"mt5"},t)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,a),size:"large",className:"btn_normal_show ml10 w_80 "},"查询")));return d.default.createElement(i.Row,{className:"config_debug"},d.default.createElement(i.Col,{className:"debug_sidebar",span:"4"},d.default.createElement("ul",null,d.default.createElement("li",{className:"list"},"设备对应关系查询"),d.default.createElement("li",{className:"list"},"设备是否在线查询"),d.default.createElement("li",{className:"list list_sub"},"设备是否订阅查询"),d.default.createElement("li",{className:"list"},"推送测试"),this.state.dwAuth||l>1?d.default.createElement("li",{className:"list"},"获取msgId明细记录"):null)),d.default.createElement(i.Col,{className:"debug_content",span:"20"},s,d.default.createElement(i.Row,{className:"list"},d.default.createElement(i.Col,{span:"10"},d.default.createElement(i.Input,{id:"deviceOnlineStatus",placeholder:"请输入PushId"}),d.default.createElement("p",{className:"mt5",style:{display:this.state.deviceOnlineStatusDisplay?"":"none"}},"在线状态: ",this.state.deviceOnlineStatusText)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,"deviceOnlineStatus"),size:"large",className:"btn_normal_show ml10 w_80 "},"查询"))),d.default.createElement(i.Row,{className:"list list_sub"},d.default.createElement(i.Col,{span:"10"},d.default.createElement(i.Input,{id:"deviceSubStatus",placeholder:"请输入PushId"}),d.default.createElement("div",{className:"mt5",style:{display:this.state.deviceSubStatusDisplay?"":"none"}},this.state.deviceSubStatusText)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,"deviceSubStatus"),size:"large",className:"btn_normal_show ml10 w_80 "},"查询"))),d.default.createElement(i.Row,{className:"list"},d.default.createElement(i.Col,{span:"10"},d.default.createElement(i.Input,{id:"systemPushReview",placeholder:"请输入PushId"}),d.default.createElement("p",{className:"mt5",style:{display:this.state.systemPushReviewDisplay?"":"none"}},this.state.systemPushReviewText)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,"systemPushReview"),size:"large",className:"btn_normal_show ml10 w_80 "},"推送"))),this.state.dwAuth||l>1?d.default.createElement(i.Row,{className:"list"},d.default.createElement(i.Row,{className:"mb10"},d.default.createElement(f,{onChange:this.onChangeType,value:this.state.chosedType},d.default.createElement(i.Radio,{value:1},"按任务查询"),l>1?d.default.createElement(i.Radio,{value:2},"按日期查询"):null)),d.default.createElement(i.Row,null,d.default.createElement("div",{className:"msgid",style:1==this.state.chosedType?{display:"block"}:{display:"none"}},d.default.createElement(i.Col,{span:"13"},d.default.createElement(i.Input,{id:"getDetailByMsgId_pushId",className:"mb10",placeholder:"请输入PushId"}),d.default.createElement(i.Input,{id:"getDetailByMsgId",placeholder:"请输入MsgId/TaskId"}),d.default.createElement("div",{className:"pushbox mt5",style:{display:this.state.getDetailByMsgIdDisplay?"":"none"}},this.state.getDetailByMsgIdText)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,"getDetailByMsgId"),size:"large",className:"btn_normal_show ml10 w_80 "},"查询"))),d.default.createElement("div",{className:"pushid",ref:"rp",style:2==this.state.chosedType?{display:"block"}:{display:"none"}},d.default.createElement(i.Col,{span:"13"},d.default.createElement(p,{defaultValue:[new Date,new Date],style:{width:"100%"},onChange:this.onChangeDate,disabledDate:this.disabledDate}),d.default.createElement(i.Input,{id:"getDetailByPushId",className:"mt10",placeholder:"请输入PushId"}),d.default.createElement("div",{className:"pushbox mt5",style:{display:this.state.getDetailByPushIdDisplay?"":"none"}},this.state.getDetailByPushIdText)),d.default.createElement(i.Col,{span:"3"},d.default.createElement(i.Button,{onClick:this.handleSubmit.bind(this,"getDetailByPushId"),size:"large",className:"btn_normal_show ml10 w_80 "},"查询"))))):null))}});e.exports=g}});