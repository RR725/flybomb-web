webpackJsonp([4],{829:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},i=a(600),r=l(i),o=a(783),u=a(830),s=a(776),c=l(s),d=a(777),m=l(d),f=a(785),p=l(f),h=a(893),g=l(h),b=o.Form.Item,E=o.Select.Option,v={labelCol:{span:8},wrapperCol:{span:16}},y=r.default.createClass({displayName:"NoticeList",getInitialState:function(){return{current:1,tableData:{loading:!0,data:[],pagination:null}}},tableData:function(e){var t=document.getElementById("userAuth")&&document.getElementById("userAuth").innerHTML,a=this;this.setState({tableData:{loading:!0,data:[]},current:e.index});var l=t>1?c.default.noticeListByAdmin:c.default.noticeListByIndex;l=m.default.makeUrl(l,e),p.default.get(l,function(t){var l=t.value.result;a.setState({tableData:{data:l,loading:!1,pagination:{total:t.value.amount,current:e.index,pageSize:10,showSizeChanger:!1,onChange:function(t){e.index=t,a.setState({current:t,searchData:e}),a.tableData(e)}}}})},function(){a.setState({tableData:{loading:!1}})})},componentDidMount:function(){var e={index:1};this.tableData(e)},handleSubmit:function(e){var t=this;this.props.form.validateFields(function(a,l){return a?void console.log("Errors in form!!!"):(l.title=l.title.trim(),l.index="click"===e?1:t.state.current,void t.tableData(l))})},render:function(){var e=this.props.form.getFieldProps,t=document.getElementById("userAuth")&&document.getElementById("userAuth").innerHTML;return r.default.createElement("div",null,r.default.createElement(o.Form,{horizontal:!0},r.default.createElement(o.Row,null,r.default.createElement(o.Col,{span:"5"},r.default.createElement(b,n({},v,{label:"标题名称    "}),r.default.createElement(o.Input,n({placeholder:"输入标题名称"},e("title",{initialValue:""}))))),t>1?r.default.createElement(o.Col,{span:"5"},r.default.createElement(b,n({},v,{label:"状态    "}),r.default.createElement(o.Select,n({},e("status",{initialValue:"-1"}),{size:"large"}),r.default.createElement(E,{value:"-1"},"全部"),r.default.createElement(E,{value:"1"},"已发布"),r.default.createElement(E,{value:"0"},"草稿")))):null,r.default.createElement(o.Col,{span:"6"},r.default.createElement(o.Button,{className:"ml10",type:"primary",onClick:this.handleSubmit.bind(this,"click"),size:"large"},"查询"),t>1?r.default.createElement(u.Link,{to:"/notice"},r.default.createElement(o.Button,{className:"ml10",type:"primary",size:"large"},"添加公告")):null))),r.default.createElement(g.default,{current:this.state.current,onRefresh:this.handleSubmit,onSearch:this.tableData,tableData:this.state.tableData}))}});y=o.Form.create()(y),e.exports=y},893:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=a(600),r=l(i),o=a(783),u=a(776),s=l(u),c=a(785),d=l(c),m=a(830),f=r.default.createClass({displayName:"App",getInitialState:function(){var e=this,t=document.getElementById("userAuth")&&document.getElementById("userAuth").innerHTML,a=[{title:"公告标题",key:"0",width:500,className:"ta_l",render:function(e,t){return r.default.createElement(m.Link,{className:t.read?"":"fw_b",to:"/notice/detail/"+t.noticeId+(t.read?"":"?refresh=true")},t.top?"【置顶】":"",r.default.createElement("span",{style:{color:"#333"}},e))},dataIndex:"title"},{title:"更新时间",key:"1",className:"ta_c",dataIndex:"lmodify"}];return t>1&&(a=a.concat([{title:"状态",key:"2",className:"ta_r",dataIndex:"statusDesc"},{title:"操作",key:"3",className:"ta_r",render:function(t,a,l){return r.default.createElement("div",null,r.default.createElement("a",{onClick:e.modify.bind(e,a,"status"),href:"javascript:;"},"发布"===a.statusDesc?"草稿":"发布"),r.default.createElement("a",{className:"pl10",onClick:e.modify.bind(e,a,"top"),href:"javascript:;"},a.top?"取消置顶":"置顶"),r.default.createElement(o.Tooltip,{title:"编辑"},r.default.createElement(m.Link,{className:"pl10",to:"/notice?noticeId="+a.noticeId},r.default.createElement("i",{className:"i_edit"}))),r.default.createElement(o.Popover,{placement:"bottom",visible:e.state["visible"+l],content:e.getContent("visible"+l,a,l),title:"确定删除?",onVisibleChange:e.togglePopover.bind(e,"visible"+l),trigger:"click"},r.default.createElement("span",null,r.default.createElement(o.Tooltip,{title:"删除"},r.default.createElement("a",{className:"pl10",href:"javascript:;"},r.default.createElement("i",{className:"i_del"}))))))},dataIndex:""}])),{userAuth:t,columns:a,refresh:!1}},modify:function(e,t){var a=this,l={noticeId:e.noticeId};"status"===t&&(l[t]="发布"===e.statusDesc?0:1),"top"===t&&(l[t]=e.top?0:1),d.default.post(s.default.updateNotice,l,function(){o.message.success("设置成功"),a.props.onRefresh()})},getContent:function(e,t,a){return r.default.createElement("div",null,r.default.createElement(o.Button,{type:"primary",className:"color_bg mr10",onClick:this.togglePopover.bind(this,e)},"取消"),r.default.createElement(o.Button,{onClick:this.del.bind(this,e,t,a)},"确定"))},del:function(e,t){var a=this,l={noticeId:t.noticeId};d.default.post(s.default.DeleteNotice,l,function(){a.props.onRefresh(),a.togglePopover(e)})},togglePopover:function(e){this.setState(n({},e,!this.state[e]))},render:function(){var e=this.props.tableData.data;return r.default.createElement("div",{id:"detailTable"},r.default.createElement(o.Table,{columns:this.state.columns,loading:this.props.tableData.loading,dataSource:e,pagination:this.props.tableData.pagination}))}});e.exports=f}});