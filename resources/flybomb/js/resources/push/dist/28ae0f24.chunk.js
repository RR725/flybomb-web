webpackJsonp([21],{1370:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=a(600),r=n(l),i=a(1371),s=n(i),u=a(776),o=n(u),d=a(777),c=n(d),p=a(785),f=n(p),h=r.default.createClass({displayName:"App",getInitialState:function(){return{current:1,tableData:{loading:!0,data:[],pagination:null}}},tableData:function(e){var t=this,a=c.default.queryString("appId",window.location.href);this.setState({tableData:{loading:!0}});var n=o.default.listAppTags;n=c.default.makeUrl(n,e),f.default.get(n,function(e){var n=e.value.result;n.map(function(e,t){n[t].key=t}),t.setState({tableData:{data:n,loading:!1,pagination:{total:e.value.amount,current:t.state.current,pageSize:10,showSizeChanger:!1,onChange:function(e){var n={appId:a,index:e};t.setState({current:e}),t.tableData(n)}}}})})},componentWillReceiveProps:function(){var e=c.default.queryString("appId",window.location.href),t={appId:e,index:1};this.setState({current:1}),this.tableData(t)},componentWillUnmount:function(){document.querySelector("#configManage")&&(document.querySelector("#configManage").className="")},componentDidMount:function(){document.querySelector("#configManage")&&(document.querySelector("#configManage").className="active");var e=c.default.queryString("appId",window.location.href);this.setState({appId:e})},render:function(){return r.default.createElement("div",null,r.default.createElement(s.default,{current:this.state.current,refresh:this.state.refresh,tableData:this.state.tableData,getTableData:this.tableData}))}});e.exports=h},1371:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=a(600),r=n(l),i=a(783),s=a(1372),u=n(s),o=a(777),d=n(o),c=a(1373),p=n(c),f=r.default.createClass({displayName:"App",getInitialState:function(){return{data:null,value:"",searchStatus:!1}},onSearch:function(e){var t=d.default.queryString("appId",window.location.href),a={appId:t,tagName:e,index:1};this.props.getTableData(a),this.setState({tagName:e})},render:function(){return r.default.createElement("div",null,r.default.createElement("div",{className:"sub_toolbar config_toolbar"},r.default.createElement(i.Row,null,r.default.createElement("div",{style:{textAlign:"right"}},r.default.createElement(i.Col,{span:"20"}," "),r.default.createElement(i.Col,{span:"4"},r.default.createElement(p.default,{placeholder:"标签名称",onSearch:this.onSearch}))))),r.default.createElement(u.default,{current:this.props.current,tagName:this.state.tagName,getTableData:this.props.getTableData,refresh:this.props.refresh,tableData:this.props.tableData}))}});e.exports=f},1372:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=a(600),i=n(r),s=a(783),u=a(776),o=n(u),d=a(777),c=n(d),p=a(785),f=n(p),h=i.default.createClass({displayName:"App",getInitialState:function(){return{refresh:!1,status:0}},createFile:function(e){var t=this,a=c.default.queryString("appId",window.location.href),n={appId:a,tagId:e};f.default.post(o.default.createTagUserFile,n,function(){var a;t.setState((a={},l(a,"status"+e,1),l(a,"refresh",!1),a))})},componentDidMount:function(){var e=c.default.queryString("appId",window.location.href),t={appId:e,index:this.props.current};this.props.getTableData(t)},handleVisibleChange:function(e){this.setState(l({},"visible"+e,!this.state["visible"+e]))},refresh:function(e){var t,a=c.default.queryString("appId",window.location.href),n={appId:a,index:this.props.current},r=this.props.tagName;r&&(n.tagName=r),this.setState((t={},l(t,"status"+e,null),l(t,"refresh",!0),t)),this.props.getTableData(n)},render:function(){var e=this,t=c.default.queryString("appId",window.location.href),a=[{title:"标签名称",key:"0",dataIndex:"tagName",className:"ta_c"},{title:"用户数",className:"ta_c",key:"1",dataIndex:"userCount"},{title:"操作",className:"ta_c",key:"2",render:function(a,n,l){return i.default.createElement("div",null,e.state.refresh?i.default.createElement("div",{className:"btn_wrap",style:{width:"140px",display:"inline-block"}},0===n.status?i.default.createElement("a",{onClick:e.createFile.bind(e,n.tagId,l),href:"javascript:;"},"生成文件"):null,1===n.status?i.default.createElement("div",null,i.default.createElement(s.Popover,{onVisibleChange:e.handleVisibleChange.bind(e,n.tagId),content:"点击刷新查看是否生成完成",trigger:"hover",title:null,visible:!e.state["visible"+n.tagId]},i.default.createElement("span",null,"文件生成中...")),i.default.createElement("a",{className:"pl10",onClick:e.refresh.bind(e,n.tagId),href:"javascript:;"},"刷新")):null,2===n.status?i.default.createElement("a",{href:o.default.downloadAppTag+"?appId="+t+"&tagId="+n.tagId},"下载文件"):null):i.default.createElement("div",{className:"btn_wrap",style:{width:"140px",display:"inline-block"}},e.state["status"+n.tagId]||0!==n.status?null:i.default.createElement("a",{onClick:e.createFile.bind(e,n.tagId,l),href:"javascript:;"},"生成文件"),1===n.status||1===e.state["status"+n.tagId]?i.default.createElement("div",null,i.default.createElement(s.Popover,{onVisibleChange:e.handleVisibleChange.bind(e,n.tagId),content:"点击刷新查看是否生成完成",trigger:"hover",title:null,visible:!e.state["visible"+n.tagId]},i.default.createElement("span",null,"文件生成中...")),i.default.createElement("a",{className:"pl10",onClick:e.refresh.bind(e,n.tagId),href:"javascript:;"},"刷新")):null,e.state["status"+n.tagId]||2!==n.status?null:i.default.createElement("a",{href:o.default.downloadAppTag+"?appId="+t+"&tagId="+n.tagId},"下载文件")))},dataIndex:""}];return i.default.createElement(s.Table,{className:"home_table",columns:a,loading:this.props.tableData.loading,dataSource:this.props.tableData.data,pagination:this.props.tableData.pagination})}});e.exports=h},1373:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(600),i=n(r),s=a(783),u=s.Form.Item,o=i.default.createClass({displayName:"Search",getInitialState:function(){return{}},onSearch:function(){var e=this.props.form.getFieldValue("value");e=e&&""!==e?e.trim():e?e:"",this.props.onSearch(e)},render:function(){var e=this.props.form.getFieldProps;return i.default.createElement(s.Form,{horizontal:!0},i.default.createElement("div",{className:"search_area"},i.default.createElement(u,null,i.default.createElement(s.Input,l({placeholder:this.props.placeholder},e("value"))),i.default.createElement(s.Icon,{className:"icon",onClick:this.onSearch,type:"search"}))))}});o=s.Form.create()(o),e.exports=o}});